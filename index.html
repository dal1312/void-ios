		<!DOCTYPE html>
<html lang="it" data-theme="dark">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>VOID Translator iOS</title>

<link rel="manifest" href="manifest.json">
<meta name="theme-color" content="#0f0f17">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
<link rel="apple-touch-icon" href="icon-192.png">

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@picocss/pico@2/css/pico.classless.min.css">

<style>
:root{
--primary:#a855f7;
--bg:#0f0f17;
--surface:#161624;
--text:#e0e0ff;
--error:#f87171;
}

body{
background:var(--bg);
color:var(--text);
min-height:100vh;
padding:1rem;
font-family:system-ui,sans-serif;
}

h1{
text-align:center;
color:var(--primary);
font-size:2rem;
margin-bottom:1rem;
}

.grid{
display:grid;
grid-template-columns:1fr;
gap:1rem;
}

textarea{
width:100%;
min-height:200px;
resize:vertical;
background:var(--surface);
border:1px solid #333350;
color:var(--text);
padding:1rem;
border-radius:10px;
font-size:1rem;
}

.controls{
display:flex;
gap:.5rem;
flex-wrap:wrap;
justify-content:center;
margin:.5rem 0;
}

button,select{
padding:.6rem;
border-radius:8px;
background:#2a1a40;
color:#fff;
border:1px solid #4a2c6e;
}

button{
background:linear-gradient(135deg,#7c3aed,#a855f7);
font-weight:700;
}

.status{
text-align:center;
margin:.5rem;
min-height:1rem;
}

</style>
</head>

<body>

<h1>VOID iOS</h1>

<div class="controls">
<select id="from">
<option value="auto">Rileva</option>
<option value="it" selected>Italiano</option>
<option value="en">Inglese</option>
<option value="la">Latino</option>
<option value="yi">Yiddish</option>
</select>

<select id="to">
<option value="en" selected>Inglese</option>
<option value="it">Italiano</option>
<option value="la">Latino</option>
<option value="yi">Yiddish</option>
</select>
</div>

<div class="grid">
<textarea id="in" placeholder="Scrivi qui..."></textarea>
<textarea id="out" readonly placeholder="Risultato..."></textarea>
</div>

<div class="controls">
<button id="go">Correggi + Traduci</button>
<button id="swap">↔</button>
<button id="clear">Pulisci</button>
</div>

<div class="status" id="status"></div>

<script>

const els = {
from: document.getElementById("from"),
to: document.getElementById("to"),
input: document.getElementById("in"),
output: document.getElementById("out"),
go: document.getElementById("go"),
swap: document.getElementById("swap"),
clear: document.getElementById("clear"),
status: document.getElementById("status")
};

function fixText(text){

if(!text) return "";

let t = text
.replace(/\s+/g," ")
.replace(/\s+([.,!?])/g,"$1")
.replace(/([.!?])\s*([a-z])/g,(m,p,c)=>p+" "+c.toUpperCase())
.trim();

const dict={
"perche":"perché",
"qual'è":"qual è",
"un pò":"un po'",
"cmq":"comunque",
"nn":"non",
"im":"I'm",
"dont":"don't",
"cant":"can't",
"iesus":"Iesus",
"christus":"Christus",
"deus":"Deus"
};

for(const k in dict){
const r=new RegExp("\\b"+k+"\\b","gi");
t=t.replace(r,dict[k]);
}

if(t && !/[.!?]$/.test(t)) t+=".";

return t;
}

async function translate(text,sl,tl){

if(sl===tl) return text;

const url=`https://translate.googleapis.com/translate_a/single?client=gtx&sl=${sl}&tl=${tl}&dt=t&q=${encodeURIComponent(text)}`;

try{
const r=await fetch(url);
const d=await r.json();
return d[0].map(x=>x[0]).join("");
}catch{
return text;
}
}

els.go.onclick=async()=>{

els.status.textContent="Correzione...";
let corrected=fixText(els.input.value);
els.input.value=corrected;

els.status.textContent="Traduzione...";
let result=await translate(corrected,els.from.value,els.to.value);

els.output.value=result;
els.status.textContent="Fatto ✓";

if(els.to.value==="yi"){
els.output.dir="rtl";
}else{
els.output.dir="ltr";
}
};

els.swap.onclick=()=>{
[els.from.value,els.to.value]=[els.to.value,els.from.value];
};

els.clear.onclick=()=>{
els.input.value="";
els.output.value="";
els.status.textContent="";
};

</script>

</body>
</html>